# –ú–æ–¥—É–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ vibecode-linter

## –°—Ç–∞—Ç—É—Å: –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. `src/types/` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ (100%)
- `messages.ts` - –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ª–∏–Ω—Ç–µ—Ä–æ–≤ (ESLint, TypeScript, Biome)
- `config.ts` - –¢–∏–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (CLI, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)
- `git.ts` - –¢–∏–ø—ã –¥–ª—è git –æ–ø–µ—Ä–∞—Ü–∏–π
- `diff.ts` - –¢–∏–ø—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ diff
- `sarif.ts` - –¢–∏–ø—ã –¥–ª—è SARIF –æ—Ç—á–µ—Ç–æ–≤
- `index.ts` - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç

#### 2. `src/diff/` - –ü–∞—Ä—Å–∏–Ω–≥ diff (100%)
- `parser.ts` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ unified diff (~150 —Å—Ç—Ä–æ–∫)
- `column.ts` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ (~130 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

#### 3. `src/git/` - Git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (100%)
- `utils.ts` - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (~110 —Å—Ç—Ä–æ–∫)
- `diff.ts` - –ü–æ–ª—É—á–µ–Ω–∏–µ git diff —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π (~220 —Å—Ç—Ä–æ–∫)
- `blame.ts` - Git blame –¥–ª—è —Å—Ç—Ä–æ–∫–∏ (~110 —Å—Ç—Ä–æ–∫)
- `history.ts` - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç—Ä–æ–∫–∏ (~120 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

#### 4. `src/config/` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (100%)
- `cli.ts` - –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (~50 —Å—Ç—Ä–æ–∫)
- `loader.ts` - –ó–∞–≥—Ä—É–∑–∫–∞ linter.config.json (~75 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

### üìã –û—Å—Ç–∞–≤—à–∏–µ—Å—è –º–æ–¥—É–ª–∏

#### 5. `src/linters/` - –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–æ–≤ (TODO)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å:
- `eslint.ts` - runESLintFix(), getESLintResults() (~150 —Å—Ç—Ä–æ–∫)
- `biome.ts` - runBiomeFix(), getBiomeDiagnostics(), parseBiomeOutput() (~200 —Å—Ç—Ä–æ–∫)
- `typescript.ts` - getTypeScriptDiagnostics(), filterMessagesByPath() (~100 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

–ò–∑–≤–ª–µ—á—å –∏–∑ `lint.ts`:
- –°—Ç—Ä–æ–∫–∏ 1026-1056: runESLintFix()
- –°—Ç—Ä–æ–∫–∏ 1058-1073: runBiomeFix()
- –°—Ç—Ä–æ–∫–∏ 1078-1134: getTypeScriptDiagnostics()
- –°—Ç—Ä–æ–∫–∏ 1139-1166: filterMessagesByPath()
- –°—Ç—Ä–æ–∫–∏ 1289-1360: getESLintResults()
- –°—Ç—Ä–æ–∫–∏ 1362-1447: getBiomeDiagnostics()
- –°—Ç—Ä–æ–∫–∏ 1449-1556: parseBiomeOutput()

#### 6. `src/analysis/` - –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (TODO)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å:
- `dependencies.ts` - __buildProgram(), __buildEdges(), __topoRank() (~180 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

–ò–∑–≤–ª–µ—á—å –∏–∑ `lint.ts`:
- –°—Ç—Ä–æ–∫–∏ 335-475: –í–µ—Å—å –±–ª–æ–∫ "Dependency-based ordering helpers"

#### 7. `src/output/` - –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (TODO)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å:
- `printer.ts` - processResults(), —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ (~250 —Å—Ç—Ä–æ–∫)
- `duplicates.ts` - generateSarifReport(), parseSarifReport(), displayClonesFromSarif() (~150 —Å—Ç—Ä–æ–∫)
- `index.ts` - –≠–∫—Å–ø–æ—Ä—Ç—ã

–ò–∑–≤–ª–µ—á—å –∏–∑ `lint.ts`:
- –°—Ç—Ä–æ–∫–∏ 1196-1227: generateSarifReport()
- –°—Ç—Ä–æ–∫–∏ 1229-1284: parseSarifReport()
- –°—Ç—Ä–æ–∫–∏ 1558-1657: processResults() (–Ω–∞—á–∞–ª–æ)
- –°—Ç—Ä–æ–∫–∏ 1658-1813: processResults() (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ - printer)
- –°—Ç—Ä–æ–∫–∏ 1815-1893: displayClonesFromSarif()

#### 8. `src/main.ts` - –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (TODO)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å:
- –ì–ª–∞–≤–Ω—É—é async —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ lint.ts (—Å—Ç—Ä–æ–∫–∏ 1173-1194)
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### 9. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ entry points:
- **CLI**: `src/bin/vibecode-linter.ts` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ —Å process.exit)
- **Library API**: `src/index.ts` (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç runLinter –∏ —Ç–∏–ø—ã)
- **Orchestration**: `src/app/runLinter.ts` (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è CORE + SHELL)

```typescript
// Programmatic usage:
import { runLinter } from '@ton-ai-core/vibecode-linter';

await runLinter({
  targetPath: 'src/',
  noFix: false,
  // ... options
});
```

## –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª–µ–π

```
lint.ts
  ‚îî‚îÄ‚îÄ src/main.ts
       ‚îú‚îÄ‚îÄ src/config/* (CLI, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
       ‚îú‚îÄ‚îÄ src/linters/* (ESLint, Biome, TypeScript)
       ‚îÇ   ‚îî‚îÄ‚îÄ src/types/messages
       ‚îú‚îÄ‚îÄ src/analysis/dependencies
       ‚îÇ   ‚îî‚îÄ‚îÄ src/types/messages
       ‚îú‚îÄ‚îÄ src/output/printer
       ‚îÇ   ‚îú‚îÄ‚îÄ src/git/* (diff, blame, history)
       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/diff/* (–ø–∞—Ä—Å–∏–Ω–≥ diff)
       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/types/git
       ‚îÇ   ‚îú‚îÄ‚îÄ src/types/messages
       ‚îÇ   ‚îî‚îÄ‚îÄ src/analysis/dependencies
       ‚îî‚îÄ‚îÄ src/output/duplicates
           ‚îî‚îÄ‚îÄ src/types/sarif
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª–∏ linters
```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã
touch src/linters/{eslint,biome,typescript,index}.ts

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏–∑ lint.ts —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏
```

### 2. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª–∏ analysis
```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã
touch src/analysis/{dependencies,index}.ts

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å TypeScript AST –∞–Ω–∞–ª–∏–∑ –∏–∑ lint.ts
```

### 3. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª–∏ output
```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã
touch src/output/{printer,duplicates,index}.ts

# –†–∞–∑–¥–µ–ª–∏—Ç—å processResults –∏ SARIF –ª–æ–≥–∏–∫—É
```

### 4. –°–æ–∑–¥–∞—Ç—å main.ts
```bash
# –°–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
touch src/main.ts

# –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≥–ª–∞–≤–Ω—É—é async —Ñ—É–Ω–∫—Ü–∏—é –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é
```

### 5. –û–±–Ω–æ–≤–∏—Ç—å lint.ts
```bash
# –°–¥–µ–ª–∞—Ç—å —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞, –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—â–µ–π src/main.ts
```

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
npm run lint

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
./lint.ts .
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª < 300 —Å—Ç—Ä–æ–∫
‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π
‚úÖ **Maintainability**: –õ–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–π –∫–æ–¥ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω
‚úÖ **Type Safety**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –±–µ–∑ `any`
‚úÖ **Clear Contracts**: TSDoc –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API
‚úÖ **Dependency Injection**: –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã

1. **–¢–∏–ø—ã** (`src/types/*`): –ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
2. **Diff** (`src/diff/*`): –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å pre/post —É—Å–ª–æ–≤–∏—è–º–∏
3. **Git** (`src/git/*`): Async —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
4. **Config** (`src/config/*`): –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
5. **Linters** (`src/linters/*`): Async –∑–∞–ø—É—Å–∫, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –º–∞—Å—Å–∏–≤—ã —Å–æ–æ–±—â–µ–Ω–∏–π
6. **Analysis** (`src/analysis/*`): TypeScript Program + —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
7. **Output** (`src/output/*`): Async –ø–µ—á–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
8. **Main** (`src/main.ts`): –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
